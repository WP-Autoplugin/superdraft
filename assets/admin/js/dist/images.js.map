{"version":3,"file":"images.js","mappings":";;;;AAAA,CAAE,UAAUA,EAAE,EAAG;EAChB,MAAM;IAAEC;EAAU,CAAC,GAAGD,EAAE,CAACE,KAAK;EAC9B,MAAM;IAAEC,MAAM;IAAEC,eAAe;IAAEC,KAAK;IAAEC,SAAS;IAAEC;EAAQ,CAAC,GAAGP,EAAE,CAACQ,UAAU;EAC5E,MAAM;IAAEC;EAAS,CAAC,GAAGT,EAAE,CAACU,OAAO;EAC/B,MAAM;IAAEC;EAAG,CAAC,GAAGX,EAAE,CAACY,IAAI;EACtB,MAAMC,QAAQ,GAAGb,EAAE,CAACa,QAAQ;EAC5B,MAAM;IAAEC,MAAM;IAAEC;EAAS,CAAC,GAAGf,EAAE,CAACgB,IAAI;EACpC,MAAM;IAAEC;EAA2B,CAAC,GAAGjB,EAAE,CAACkB,OAAO;;EAEjD;EACA,MAAMC,mBAAmB,GAAGF,0BAA0B,CAAIG,iBAAiB,IAAM;IAChF,OAASC,KAAK,IAAM;MAClB;MACA,MAAM,CAAEC,YAAY,EAAEC,eAAe,CAAE,GAAGd,QAAQ,CAAE,KAAM,CAAC;;MAE3D;MACA,MAAMe,oBAAoB,GAAGA,CAAA,KAAM;QAClC,IAAI,CAACF,YAAY,EAAE,OAAO,IAAI;QAE9B,OAAOtB,EAAE,CAACU,OAAO,CAACe,aAAa,CAC9B,KAAK,EACL;UACCC,SAAS,EAAE,qCAAqC;UAChDC,KAAK,EAAE;YACNC,QAAQ,EAAE,UAAU;YACpBC,GAAG,EAAE,CAAC;YACNC,IAAI,EAAE,CAAC;YACPC,KAAK,EAAE,CAAC;YACRC,MAAM,EAAE,CAAC;YACTC,eAAe,EAAE,0BAA0B;YAC3CC,OAAO,EAAE,MAAM;YACfC,aAAa,EAAE,QAAQ;YACvBC,UAAU,EAAE,QAAQ;YACpBC,cAAc,EAAE,QAAQ;YACxBC,MAAM,EAAE;UACT;QACD,CAAC,EACDtC,EAAE,CAACU,OAAO,CAACe,aAAa,CAAClB,OAAO,CAAC,EACjCP,EAAE,CAACU,OAAO,CAACe,aAAa,CACvB,GAAG,EACH;UACCE,KAAK,EAAE;YAAEY,SAAS,EAAE;UAAO;QAC5B,CAAC,EACD5B,EAAE,CAAC,qBAAqB,EAAE,YAAY,CACvC,CACD,CAAC;MACF,CAAC;;MAED;MACA,MAAM6B,uBAAuB,GAAGA,CAAA,KAAM;QACrC,MAAM,CAAEC,MAAM,EAAEC,SAAS,CAAE,GAAGjC,QAAQ,CAAE,EAAG,CAAC;QAC5C,MAAM,CAAEkC,IAAI,EAAEC,OAAO,CAAE,GAAGnC,QAAQ,CAAE,IAAK,CAAC,CAAC,CAAC;QAC5C,MAAMoC,MAAM,GAAG/B,MAAM,CAAC,aAAa,CAAC,CAACgC,sBAAsB,CAAC,IAAI,CAAC;QACjE,MAAMC,eAAe,GAAGjC,MAAM,CAAC,aAAa,CAAC,CAACgC,sBAAsB,CAAC,gBAAgB,CAAC;;QAEtF;QACA,MAAME,mBAAmB,GAAIC,eAAe,IAAK;UAChDlC,QAAQ,CAAC,aAAa,CAAC,CAACmC,QAAQ,CAAC;YAAEC,cAAc,EAAEF;UAAgB,CAAC,CAAC;QACtE,CAAC;;QAED;QACA,MAAMG,mBAAmB,GAAG,MAAAA,CAAA,KAAY;UACvC,IAAK,CAAEX,MAAM,EAAG;UAChBlB,eAAe,CAAE,IAAK,CAAC;UACvB,IAAI;YACH,MAAM8B,QAAQ,GAAG,MAAMxC,QAAQ,CAAC;cAC/ByC,IAAI,EAAE,+BAA+B;cACrCC,MAAM,EAAE,MAAM;cACdvC,IAAI,EAAE;gBAAE6B,MAAM;gBAAEJ;cAAO;YACxB,CAAC,CAAC;YACF;YACA,IAAKY,QAAQ,CAACG,aAAa,EAAG;cAC7BR,mBAAmB,CAAEK,QAAQ,CAACG,aAAc,CAAC;YAC9C;UACD,CAAC,CAAC,OAAQC,KAAK,EAAG;YACjBC,OAAO,CAACD,KAAK,CAAE,yBAAyB,EAAEA,KAAM,CAAC;UAClD,CAAC,SAAS;YACTlC,eAAe,CAAE,KAAM,CAAC;UACzB;QACD,CAAC;;QAED;QACA,MAAMoC,eAAe,GAAG,MAAAA,CAAA,KAAY;UACnC,IAAK,CAAElB,MAAM,IAAI,CAAEM,eAAe,EAAG;UACrCxB,eAAe,CAAE,IAAK,CAAC;UACvB,IAAI;YACH,MAAM8B,QAAQ,GAAG,MAAMxC,QAAQ,CAAC;cAC/ByC,IAAI,EAAE,2BAA2B;cACjCC,MAAM,EAAE,MAAM;cACdvC,IAAI,EAAE;gBAAE6B,MAAM;gBAAEE,eAAe;gBAAEN;cAAO;YACzC,CAAC,CAAC;YACF;YACA,IAAKY,QAAQ,CAACG,aAAa,EAAG;cAC7BR,mBAAmB,CAAEK,QAAQ,CAACG,aAAc,CAAC;YAC9C;UACD,CAAC,CAAC,OAAQC,KAAK,EAAG;YACjBC,OAAO,CAACD,KAAK,CAAE,sBAAsB,EAAEA,KAAM,CAAC;UAC/C,CAAC,SAAS;YACTlC,eAAe,CAAE,KAAM,CAAC;UACzB;QACD,CAAC;QAED,MAAMqC,YAAY,GAAGjB,IAAI,KAAK,UAAU,GAAGS,mBAAmB,GAAGO,eAAe;QAEhF,MAAME,UAAU,GAAIC,OAAO,IAAK;UAC/BlB,OAAO,CAACD,IAAI,KAAKmB,OAAO,GAAG,IAAI,GAAGA,OAAO,CAAC;UAC1CpB,SAAS,CAAC,EAAE,CAAC;QACd,CAAC;QAED,OAAO1C,EAAE,CAACU,OAAO,CAACe,aAAa,CAC9BzB,EAAE,CAACU,OAAO,CAACqD,QAAQ,EACnB,CAAC,CAAC,EACF/D,EAAE,CAACU,OAAO,CAACe,aAAa,CAAE,KAAK,EAAE,CAAC,CAAC,EAClCzB,EAAE,CAACU,OAAO,CAACe,aAAa,CAAEtB,MAAM,EAAE;UACjC6D,WAAW,EAAErB,IAAI,KAAK,UAAU;UAChCsB,SAAS,EAAEtB,IAAI,KAAK,UAAU;UAC9BuB,OAAO,EAAEA,CAAA,KAAML,UAAU,CAAC,UAAU,CAAC;UACrClC,KAAK,EAAE;YAAEwC,WAAW,EAAE;UAAM;QAC7B,CAAC,EAAExD,EAAE,CAAE,gBAAgB,EAAE,YAAa,CAAE,CAAC,EACzCX,EAAE,CAACU,OAAO,CAACe,aAAa,CAAEtB,MAAM,EAAE;UACjC6D,WAAW,EAAErB,IAAI,KAAK,MAAM;UAC5BsB,SAAS,EAAEtB,IAAI,KAAK,MAAM;UAC1BuB,OAAO,EAAEA,CAAA,KAAML,UAAU,CAAC,MAAM,CAAC;UACjCO,QAAQ,EAAE,CAACrB;QACZ,CAAC,EAAEpC,EAAE,CAAE,YAAY,EAAE,YAAa,CAAE,CACrC,CAAC,EACDgC,IAAI,IAAI3C,EAAE,CAACU,OAAO,CAACe,aAAa,CAAE,KAAK,EAAE,CAAC,CAAC,EAC1CzB,EAAE,CAACU,OAAO,CAACe,aAAa,CAAErB,eAAe,EAAE;UAC1CiE,KAAK,EAAE1D,EAAE,CAAE,QAAQ,EAAE,YAAa,CAAC;UACnC2D,KAAK,EAAE7B,MAAM;UACb8B,QAAQ,EAAE7B,SAAS;UACnB8B,IAAI,EAAE7B,IAAI,KAAK,UAAU,GACtBhC,EAAE,CAAE,gDAAgD,EAAE,YAAa,CAAC,GACpEA,EAAE,CAAE,6CAA6C,EAAE,YAAa;QACpE,CAAE,CAAC,EACHX,EAAE,CAACU,OAAO,CAACe,aAAa,CAAEtB,MAAM,EAAE;UACjC8D,SAAS,EAAE,IAAI;UACfC,OAAO,EAAEN,YAAY;UACrBQ,QAAQ,EAAE9C,YAAY;UACtBK,KAAK,EAAE;YAAEY,SAAS,EAAE;UAAM;QAC3B,CAAC,EAAEjB,YAAY,GAAGX,EAAE,CAAE,eAAe,EAAE,YAAa,CAAC,GAAKgC,IAAI,KAAK,UAAU,GAAGhC,EAAE,CAAE,UAAU,EAAE,YAAa,CAAC,GAAGA,EAAE,CAAE,MAAM,EAAE,YAAa,CAAI,CAC/I,CACD,CAAC;MACF,CAAC;;MAED;MACA,OAAOX,EAAE,CAACU,OAAO,CAACe,aAAa,CAC9BzB,EAAE,CAACU,OAAO,CAACqD,QAAQ,EACnB,CAAC,CAAC,EACF/D,EAAE,CAACU,OAAO,CAACe,aAAa,CACvB,KAAK,EACL;QACCC,SAAS,EAAE,mCAAmC;QAC9CC,KAAK,EAAE;UAAEC,QAAQ,EAAE;QAAW;MAC/B,CAAC,EACD5B,EAAE,CAACU,OAAO,CAACe,aAAa,CAAEL,iBAAiB,EAAEC,KAAM,CAAC,EACpDrB,EAAE,CAACU,OAAO,CAACe,aAAa,CAAED,oBAAqB,CAChD,CAAC,EACDxB,EAAE,CAACU,OAAO,CAACe,aAAa,CAAEe,uBAAuB,EAAE,IAAK,CACzD,CAAC;IACF,CAAC;EACH,CAAC,EAAE,qBAAsB,CAAC;;EAE1B;EACAvC,SAAS,CACR,0BAA0B,EAC1B,kCAAkC,EAClCkB,mBACD,CAAC;AAEF,CAAC,EAAIsD,MAAM,CAACzE,EAAG,CAAC,C","sources":["webpack://superdraft/./src/images.js"],"sourcesContent":["( function( wp ) {\n\tconst { addFilter } = wp.hooks;\n\tconst { Button, TextareaControl, Panel, PanelBody, Spinner } = wp.components;\n\tconst { useState } = wp.element;\n\tconst { __ } = wp.i18n;\n\tconst apiFetch = wp.apiFetch;\n\tconst { select, dispatch } = wp.data;\n\tconst { createHigherOrderComponent } = wp.compose;\n\n\t// Higher order component to add our AI functionality to the Featured Image panel\n\tconst withImageGeneration = createHigherOrderComponent( ( OriginalComponent ) => {\n\t\treturn ( props ) => {\n\t\t\t\t// Move isProcessing state up to be accessible for the overlay\n\t\t\t\tconst [ isProcessing, setIsProcessing ] = useState( false );\n\t\t\t\t\n\t\t\t\t// Featured image overlay component that shows during processing\n\t\t\t\tconst FeaturedImageOverlay = () => {\n\t\t\t\t\tif (!isProcessing) return null;\n\t\t\t\t\t\n\t\t\t\t\treturn wp.element.createElement(\n\t\t\t\t\t\t'div',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tclassName: 'superdraft-image-processing-overlay',\n\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\t\t\ttop: 0,\n\t\t\t\t\t\t\t\tleft: 0,\n\t\t\t\t\t\t\t\tright: 0,\n\t\t\t\t\t\t\t\tbottom: 0,\n\t\t\t\t\t\t\t\tbackgroundColor: 'rgba(255, 255, 255, 0.7)',\n\t\t\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\t\t\tflexDirection: 'column',\n\t\t\t\t\t\t\t\talignItems: 'center',\n\t\t\t\t\t\t\t\tjustifyContent: 'center',\n\t\t\t\t\t\t\t\tzIndex: 100\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\twp.element.createElement(Spinner),\n\t\t\t\t\t\twp.element.createElement(\n\t\t\t\t\t\t\t'p',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tstyle: { marginTop: '10px' }\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t__('Processing image...', 'superdraft')\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\t// Our custom component to add after the original Featured Image component\n\t\t\t\tconst ImageGenerationControls = () => {\n\t\t\t\t\tconst [ prompt, setPrompt ] = useState( '' );\n\t\t\t\t\tconst [ mode, setMode ] = useState( null ); // null, 'generate' or 'edit'\n\t\t\t\t\tconst postId = select('core/editor').getEditedPostAttribute('id');\n\t\t\t\t\tconst featuredImageId = select('core/editor').getEditedPostAttribute('featured_media');\n\n\t\t\t\t\t// Update the featured image in the editor.\n\t\t\t\t\tconst updateFeaturedImage = (newAttachmentId) => {\n\t\t\t\t\t\tdispatch('core/editor').editPost({ featured_media: newAttachmentId });\n\t\t\t\t\t};\n\n\t\t\t\t\t// Generate new image handler.\n\t\t\t\t\tconst handleGenerateImage = async () => {\n\t\t\t\t\t\tif ( ! prompt ) return;\n\t\t\t\t\t\tsetIsProcessing( true );\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tconst response = await apiFetch({\n\t\t\t\t\t\t\t\tpath: '/superdraft/v1/image/generate',\n\t\t\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\t\t\tdata: { postId, prompt }\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t// Update featured image using API response.\n\t\t\t\t\t\t\tif ( response.attachment_id ) {\n\t\t\t\t\t\t\t\tupdateFeaturedImage( response.attachment_id );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} catch ( error ) {\n\t\t\t\t\t\t\tconsole.error( 'Image generation error:', error );\n\t\t\t\t\t\t} finally {\n\t\t\t\t\t\t\tsetIsProcessing( false );\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\t// Edit image handler.\n\t\t\t\t\tconst handleEditImage = async () => {\n\t\t\t\t\t\tif ( ! prompt || ! featuredImageId ) return;\n\t\t\t\t\t\tsetIsProcessing( true );\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tconst response = await apiFetch({\n\t\t\t\t\t\t\t\tpath: '/superdraft/v1/image/edit',\n\t\t\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\t\t\tdata: { postId, featuredImageId, prompt }\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t// Update featured image using API response.\n\t\t\t\t\t\t\tif ( response.attachment_id ) {\n\t\t\t\t\t\t\t\tupdateFeaturedImage( response.attachment_id );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} catch ( error ) {\n\t\t\t\t\t\t\tconsole.error( 'Image editing error:', error );\n\t\t\t\t\t\t} finally {\n\t\t\t\t\t\t\tsetIsProcessing( false );\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\tconst handleAction = mode === 'generate' ? handleGenerateImage : handleEditImage;\n\n\t\t\t\t\tconst toggleMode = (newMode) => {\n\t\t\t\t\t\tsetMode(mode === newMode ? null : newMode);\n\t\t\t\t\t\tsetPrompt('');\n\t\t\t\t\t};\n\n\t\t\t\t\treturn wp.element.createElement( \n\t\t\t\t\t\twp.element.Fragment,\n\t\t\t\t\t\t{},\n\t\t\t\t\t\twp.element.createElement( 'div', {},\n\t\t\t\t\t\t\twp.element.createElement( Button, {\n\t\t\t\t\t\t\t\tisSecondary: mode !== 'generate',\n\t\t\t\t\t\t\t\tisPrimary: mode === 'generate',\n\t\t\t\t\t\t\t\tonClick: () => toggleMode('generate'),\n\t\t\t\t\t\t\t\tstyle: { marginRight: '8px' }\n\t\t\t\t\t\t\t}, __( 'Generate Image', 'superdraft' ) ),\n\t\t\t\t\t\t\twp.element.createElement( Button, {\n\t\t\t\t\t\t\t\tisSecondary: mode !== 'edit',\n\t\t\t\t\t\t\t\tisPrimary: mode === 'edit',\n\t\t\t\t\t\t\t\tonClick: () => toggleMode('edit'),\n\t\t\t\t\t\t\t\tdisabled: !featuredImageId\n\t\t\t\t\t\t\t}, __( 'Edit Image', 'superdraft' ) )\n\t\t\t\t\t\t),\n\t\t\t\t\t\tmode && wp.element.createElement( 'div', {},\n\t\t\t\t\t\t\twp.element.createElement( TextareaControl, {\n\t\t\t\t\t\t\t\tlabel: __( 'Prompt', 'superdraft' ),\n\t\t\t\t\t\t\t\tvalue: prompt,\n\t\t\t\t\t\t\t\tonChange: setPrompt,\n\t\t\t\t\t\t\t\thelp: mode === 'generate'\n\t\t\t\t\t\t\t\t\t? __( 'Enter a description for the new featured image', 'superdraft' )\n\t\t\t\t\t\t\t\t\t: __( 'Describe the changes for your current image', 'superdraft' ),\n\t\t\t\t\t\t\t} ),\n\t\t\t\t\t\t\twp.element.createElement( Button, {\n\t\t\t\t\t\t\t\tisPrimary: true,\n\t\t\t\t\t\t\t\tonClick: handleAction,\n\t\t\t\t\t\t\t\tdisabled: isProcessing,\n\t\t\t\t\t\t\t\tstyle: { marginTop: '8px' }\n\t\t\t\t\t\t\t}, isProcessing ? __( 'Processing...', 'superdraft' ) : ( mode === 'generate' ? __( 'Generate', 'superdraft' ) : __( 'Edit', 'superdraft' ) ) )\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\t\t\t\t};\n\n\t\t\t\t// Render the original component followed by our custom controls\n\t\t\t\treturn wp.element.createElement(\n\t\t\t\t\twp.element.Fragment,\n\t\t\t\t\t{},\n\t\t\t\t\twp.element.createElement(\n\t\t\t\t\t\t'div',\n\t\t\t\t\t\t{ \n\t\t\t\t\t\t\tclassName: 'superdraft-featured-image-wrapper',\n\t\t\t\t\t\t\tstyle: { position: 'relative' }\n\t\t\t\t\t\t},\n\t\t\t\t\t\twp.element.createElement( OriginalComponent, props ),\n\t\t\t\t\t\twp.element.createElement( FeaturedImageOverlay )\n\t\t\t\t\t),\n\t\t\t\t\twp.element.createElement( ImageGenerationControls, null )\n\t\t\t\t);\n\t\t\t};\n\t}, 'withImageGeneration' );\n\n\t// Apply our HOC to the PostFeaturedImage component\n\taddFilter(\n\t\t'editor.PostFeaturedImage',\n\t\t'superdraft/with-image-generation',\n\t\twithImageGeneration\n\t);\n\n} )( window.wp );\n"],"names":["wp","addFilter","hooks","Button","TextareaControl","Panel","PanelBody","Spinner","components","useState","element","__","i18n","apiFetch","select","dispatch","data","createHigherOrderComponent","compose","withImageGeneration","OriginalComponent","props","isProcessing","setIsProcessing","FeaturedImageOverlay","createElement","className","style","position","top","left","right","bottom","backgroundColor","display","flexDirection","alignItems","justifyContent","zIndex","marginTop","ImageGenerationControls","prompt","setPrompt","mode","setMode","postId","getEditedPostAttribute","featuredImageId","updateFeaturedImage","newAttachmentId","editPost","featured_media","handleGenerateImage","response","path","method","attachment_id","error","console","handleEditImage","handleAction","toggleMode","newMode","Fragment","isSecondary","isPrimary","onClick","marginRight","disabled","label","value","onChange","help","window"],"sourceRoot":""}