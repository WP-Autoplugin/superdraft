{"version":3,"file":"images.js","mappings":"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","sources":["webpack://superdraft/./src/images.js"],"sourcesContent":["( function( wp ) {\n\tconst { registerPlugin } = wp.plugins;\n\tconst { PluginDocumentSettingPanel } = wp.editPost;\n\tconst { Button, TextareaControl } = wp.components;\n\tconst { useState } = wp.element;\n\tconst { __ } = wp.i18n;\n\tconst apiFetch = wp.apiFetch;\n\tconst { select, dispatch } = wp.data;\n\n\tconst ImageGenerationPanel = () => {\n\t\tconst [ prompt, setPrompt ] = useState( '' );\n\t\tconst [ isProcessing, setIsProcessing ] = useState( false );\n\t\tconst [ mode, setMode ] = useState( 'generate' ); // 'generate' or 'edit'\n\t\tconst postId = select('core/editor').getEditedPostAttribute('id');\n\t\tconst featuredImageId = select('core/editor').getEditedPostAttribute('featured_media');\n\n\t\t// Update the featured image in the editor.\n\t\tconst updateFeaturedImage = (newAttachmentId) => {\n\t\t\tdispatch('core/editor').editPost({ featured_media: newAttachmentId });\n\t\t};\n\n\t\t// Generate new image handler.\n\t\tconst handleGenerateImage = async () => {\n\t\t\tif ( ! prompt ) return;\n\t\t\tsetIsProcessing( true );\n\t\t\ttry {\n\t\t\t\tconst response = await apiFetch({\n\t\t\t\t\tpath: '/superdraft/v1/image/generate',\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tdata: { postId, prompt }\n\t\t\t\t});\n\t\t\t\t// Update featured image using API response.\n\t\t\t\tif ( response.attachment_id ) {\n\t\t\t\t\tupdateFeaturedImage( response.attachment_id );\n\t\t\t\t}\n\t\t\t} catch ( error ) {\n\t\t\t\tconsole.error( 'Image generation error:', error );\n\t\t\t} finally {\n\t\t\t\tsetIsProcessing( false );\n\t\t\t}\n\t\t};\n\n\t\t// Edit image handler.\n\t\tconst handleEditImage = async () => {\n\t\t\tif ( ! prompt || ! featuredImageId ) return;\n\t\t\tsetIsProcessing( true );\n\t\t\ttry {\n\t\t\t\tconst response = await apiFetch({\n\t\t\t\t\tpath: '/superdraft/v1/image/edit',\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tdata: { postId, featuredImageId, prompt }\n\t\t\t\t});\n\t\t\t\t// Update featured image using API response.\n\t\t\t\tif ( response.attachment_id ) {\n\t\t\t\t\tupdateFeaturedImage( response.attachment_id );\n\t\t\t\t}\n\t\t\t} catch ( error ) {\n\t\t\t\tconsole.error( 'Image editing error:', error );\n\t\t\t} finally {\n\t\t\t\tsetIsProcessing( false );\n\t\t\t}\n\t\t};\n\n\t\tconst handleAction = mode === 'generate' ? handleGenerateImage : handleEditImage;\n\n\t\treturn (\n\t\t\twp.element.createElement( PluginDocumentSettingPanel, {\n\t\t\t\tname: 'superdraft-image-generation-panel',\n\t\t\t\ttitle: __( 'Featured Image AI', 'superdraft' ),\n\t\t\t\tclassName: 'superdraft-image-generation-panel',\n\t\t\t},\n\t\t\t\t// Mode toggle buttons.\n\t\t\t\twp.element.createElement( 'div', { style: { marginBottom: '10px' } },\n\t\t\t\t\twp.element.createElement( Button, {\n\t\t\t\t\t\tisSecondary: mode !== 'generate',\n\t\t\t\t\t\tonClick: () => setMode('generate')\n\t\t\t\t\t}, __( 'Generate Image', 'superdraft' ) ),\n\t\t\t\t\twp.element.createElement( Button, {\n\t\t\t\t\t\tisSecondary: mode !== 'edit',\n\t\t\t\t\t\tonClick: () => setMode('edit'),\n\t\t\t\t\t\tdisabled: ! featuredImageId\n\t\t\t\t\t}, __( 'Edit Image', 'superdraft' ) )\n\t\t\t\t),\n\t\t\t\t// Prompt input.\n\t\t\t\twp.element.createElement( TextareaControl, {\n\t\t\t\t\tlabel: mode === 'generate' ? __( 'Image Prompt', 'superdraft' ) : __( 'Edit Prompt', 'superdraft' ),\n\t\t\t\t\tvalue: prompt,\n\t\t\t\t\tonChange: setPrompt,\n\t\t\t\t\thelp: mode === 'generate'\n\t\t\t\t\t\t? __( 'Enter a description for the new featured image', 'superdraft' )\n\t\t\t\t\t\t: __( 'Describe the changes for your current image', 'superdraft' ),\n\t\t\t\t} ),\n\t\t\t\t// Action button.\n\t\t\t\twp.element.createElement( Button, {\n\t\t\t\t\tisPrimary: true,\n\t\t\t\t\tonClick: handleAction,\n\t\t\t\t\tdisabled: isProcessing,\n\t\t\t\t}, isProcessing ? __( 'Processing...', 'superdraft' ) : ( mode === 'generate' ? __( 'Generate', 'superdraft' ) : __( 'Edit', 'superdraft' ) ) )\n\t\t\t\t// Note: We remove any in-panel display of the new image.\n\t\t\t)\n\t\t);\n\t};\n\n\tregisterPlugin( 'superdraft-image-generation', {\n\t\trender: ImageGenerationPanel,\n\t\ticon: 'format-image',\n\t} );\n} )( window.wp );\n"],"names":["wp","registerPlugin","plugins","PluginDocumentSettingPanel","editPost","Button","TextareaControl","components","useState","element","__","i18n","apiFetch","select","dispatch","data","ImageGenerationPanel","prompt","setPrompt","isProcessing","setIsProcessing","mode","setMode","postId","getEditedPostAttribute","featuredImageId","updateFeaturedImage","newAttachmentId","featured_media","handleGenerateImage","response","path","method","attachment_id","error","console","handleEditImage","handleAction","createElement","name","title","className","style","marginBottom","isSecondary","onClick","disabled","label","value","onChange","help","isPrimary","render","icon","window"],"sourceRoot":""}