{"version":3,"file":"images.js","mappings":"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","sources":["webpack://superdraft/./src/images.js"],"sourcesContent":["( function( wp ) {\n\tconst { addFilter } = wp.hooks;\n\tconst { Button, TextareaControl, Panel, PanelBody } = wp.components;\n\tconst { useState } = wp.element;\n\tconst { __ } = wp.i18n;\n\tconst apiFetch = wp.apiFetch;\n\tconst { select, dispatch } = wp.data;\n\tconst { createHigherOrderComponent } = wp.compose;\n\n\t// Higher order component to add our AI functionality to the Featured Image panel\n\tconst withImageGeneration = createHigherOrderComponent( ( OriginalComponent ) => {\n\t\treturn ( props ) => {\n\t\t\t// Our custom component to add after the original Featured Image component\n\t\t\tconst ImageGenerationControls = () => {\n\t\t\t\tconst [ prompt, setPrompt ] = useState( '' );\n\t\t\t\tconst [ isProcessing, setIsProcessing ] = useState( false );\n\t\t\t\tconst [ mode, setMode ] = useState( null ); // null, 'generate' or 'edit'\n\t\t\t\tconst postId = select('core/editor').getEditedPostAttribute('id');\n\t\t\t\tconst featuredImageId = select('core/editor').getEditedPostAttribute('featured_media');\n\n\t\t\t\t// Update the featured image in the editor.\n\t\t\t\tconst updateFeaturedImage = (newAttachmentId) => {\n\t\t\t\t\tdispatch('core/editor').editPost({ featured_media: newAttachmentId });\n\t\t\t\t};\n\n\t\t\t\t// Generate new image handler.\n\t\t\t\tconst handleGenerateImage = async () => {\n\t\t\t\t\tif ( ! prompt ) return;\n\t\t\t\t\tsetIsProcessing( true );\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst response = await apiFetch({\n\t\t\t\t\t\t\tpath: '/superdraft/v1/image/generate',\n\t\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\t\tdata: { postId, prompt }\n\t\t\t\t\t\t});\n\t\t\t\t\t\t// Update featured image using API response.\n\t\t\t\t\t\tif ( response.attachment_id ) {\n\t\t\t\t\t\t\tupdateFeaturedImage( response.attachment_id );\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch ( error ) {\n\t\t\t\t\t\tconsole.error( 'Image generation error:', error );\n\t\t\t\t\t} finally {\n\t\t\t\t\t\tsetIsProcessing( false );\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\t// Edit image handler.\n\t\t\t\tconst handleEditImage = async () => {\n\t\t\t\t\tif ( ! prompt || ! featuredImageId ) return;\n\t\t\t\t\tsetIsProcessing( true );\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst response = await apiFetch({\n\t\t\t\t\t\t\tpath: '/superdraft/v1/image/edit',\n\t\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\t\tdata: { postId, featuredImageId, prompt }\n\t\t\t\t\t\t});\n\t\t\t\t\t\t// Update featured image using API response.\n\t\t\t\t\t\tif ( response.attachment_id ) {\n\t\t\t\t\t\t\tupdateFeaturedImage( response.attachment_id );\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch ( error ) {\n\t\t\t\t\t\tconsole.error( 'Image editing error:', error );\n\t\t\t\t\t} finally {\n\t\t\t\t\t\tsetIsProcessing( false );\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tconst handleAction = mode === 'generate' ? handleGenerateImage : handleEditImage;\n\n\t\t\t\tconst toggleMode = (newMode) => {\n\t\t\t\t\tsetMode(mode === newMode ? null : newMode);\n\t\t\t\t\tsetPrompt('');\n\t\t\t\t};\n\n\t\t\t\treturn wp.element.createElement( \n\t\t\t\t\twp.element.Fragment,\n\t\t\t\t\t{},\n\t\t\t\t\twp.element.createElement( 'div', {},\n\t\t\t\t\t\twp.element.createElement( Button, {\n\t\t\t\t\t\t\tisSecondary: mode !== 'generate',\n\t\t\t\t\t\t\tisPrimary: mode === 'generate',\n\t\t\t\t\t\t\tonClick: () => toggleMode('generate'),\n                            style: { marginRight: '8px' }\n\t\t\t\t\t\t}, __( 'Generate Image', 'superdraft' ) ),\n\t\t\t\t\t\twp.element.createElement( Button, {\n\t\t\t\t\t\t\tisSecondary: mode !== 'edit',\n\t\t\t\t\t\t\tisPrimary: mode === 'edit',\n\t\t\t\t\t\t\tonClick: () => toggleMode('edit'),\n\t\t\t\t\t\t\tdisabled: !featuredImageId\n\t\t\t\t\t\t}, __( 'Edit Image', 'superdraft' ) )\n\t\t\t\t\t),\n\t\t\t\t\tmode && wp.element.createElement( 'div', {},\n\t\t\t\t\t\twp.element.createElement( TextareaControl, {\n\t\t\t\t\t\t\tlabel: __( 'Prompt', 'superdraft' ),\n\t\t\t\t\t\t\tvalue: prompt,\n\t\t\t\t\t\t\tonChange: setPrompt,\n\t\t\t\t\t\t\thelp: mode === 'generate'\n\t\t\t\t\t\t\t\t? __( 'Enter a description for the new featured image', 'superdraft' )\n\t\t\t\t\t\t\t\t: __( 'Describe the changes for your current image', 'superdraft' ),\n\t\t\t\t\t\t} ),\n\t\t\t\t\t\twp.element.createElement( Button, {\n\t\t\t\t\t\t\tisPrimary: true,\n\t\t\t\t\t\t\tonClick: handleAction,\n\t\t\t\t\t\t\tdisabled: isProcessing,\n\t\t\t\t\t\t\tstyle: { marginTop: '8px' }\n\t\t\t\t\t\t}, isProcessing ? __( 'Processing...', 'superdraft' ) : ( mode === 'generate' ? __( 'Generate', 'superdraft' ) : __( 'Edit', 'superdraft' ) ) )\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t};\n\n\t\t\t// Render the original component followed by our custom controls\n\t\t\treturn wp.element.createElement(\n\t\t\t\twp.element.Fragment,\n\t\t\t\t{},\n\t\t\t\twp.element.createElement( OriginalComponent, props ),\n\t\t\t\twp.element.createElement( ImageGenerationControls, null )\n\t\t\t);\n\t\t};\n\t}, 'withImageGeneration' );\n\n\t// Apply our HOC to the PostFeaturedImage component\n\taddFilter(\n\t\t'editor.PostFeaturedImage',\n\t\t'superdraft/with-image-generation',\n\t\twithImageGeneration\n\t);\n\n} )( window.wp );\n"],"names":["wp","addFilter","hooks","Button","TextareaControl","Panel","PanelBody","components","useState","element","__","i18n","apiFetch","select","dispatch","data","createHigherOrderComponent","compose","withImageGeneration","OriginalComponent","props","ImageGenerationControls","prompt","setPrompt","isProcessing","setIsProcessing","mode","setMode","postId","getEditedPostAttribute","featuredImageId","updateFeaturedImage","newAttachmentId","editPost","featured_media","handleGenerateImage","response","path","method","attachment_id","error","console","handleEditImage","handleAction","toggleMode","newMode","createElement","Fragment","isSecondary","isPrimary","onClick","style","marginRight","disabled","label","value","onChange","help","marginTop","window"],"sourceRoot":""}