(()=>{"use strict";var e={20:(e,t,r)=>{var n=r(540),o=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,r){var n,i={},c=null,l=null;for(n in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)a.call(t,n)&&!u.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===i[n]&&(i[n]=t[n]);return{$$typeof:o,type:e,key:c,ref:l,props:i,_owner:s.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},287:(e,t)=>{var r=Symbol.for("react.element"),n=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator,m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},h=Object.assign,g={};function y(e,t,r){this.props=e,this.context=t,this.refs=g,this.updater=r||m}function v(){}function b(e,t,r){this.props=e,this.context=t,this.refs=g,this.updater=r||m}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var E=b.prototype=new v;E.constructor=b,h(E,y.prototype),E.isPureReactComponent=!0;var S=Array.isArray,x=Object.prototype.hasOwnProperty,_={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function w(e,t,n){var o,i={},a=null,s=null;if(null!=t)for(o in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)x.call(t,o)&&!C.hasOwnProperty(o)&&(i[o]=t[o]);var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];i.children=c}if(e&&e.defaultProps)for(o in u=e.defaultProps)void 0===i[o]&&(i[o]=u[o]);return{$$typeof:r,type:e,key:a,ref:s,props:i,_owner:_.current}}function k(e){return"object"==typeof e&&null!==e&&e.$$typeof===r}var A=/\/+/g;function R(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function T(e,t,o,i,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case r:case n:u=!0}}if(u)return a=a(u=e),e=""===i?"."+R(u,0):i,S(a)?(o="",null!=e&&(o=e.replace(A,"$&/")+"/"),T(a,t,o,"",(function(e){return e}))):null!=a&&(k(a)&&(a=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,o+(!a.key||u&&u.key===a.key?"":(""+a.key).replace(A,"$&/")+"/")+e)),t.push(a)),1;if(u=0,i=""===i?".":i+":",S(e))for(var c=0;c<e.length;c++){var l=i+R(s=e[c],c);u+=T(s,t,o,l,a)}else if(l=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"==typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=T(s=s.value,t,o,l=i+R(s,c++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function N(e,t,r){if(null==e)return e;var n=[],o=0;return T(e,n,"","",(function(e){return t.call(r,e,o++)})),n}function O(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},I={transition:null},D={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:I,ReactCurrentOwner:_};function j(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:N,forEach:function(e,t,r){N(e,(function(){t.apply(this,arguments)}),r)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=o,t.Profiler=a,t.PureComponent=b,t.StrictMode=i,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.act=j,t.cloneElement=function(e,t,n){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=h({},e.props),i=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=_.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)x.call(t,c)&&!C.hasOwnProperty(c)&&(o[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)o.children=n;else if(1<c){u=Array(c);for(var l=0;l<c;l++)u[l]=arguments[l+2];o.children=u}return{$$typeof:r,type:e.type,key:i,ref:a,props:o,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=w,t.createFactory=function(e){var t=w.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:O}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=I.transition;I.transition={};try{e()}finally{I.transition=t}},t.unstable_act=j,t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,r){return P.current.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,r){return P.current.useReducer(e,t,r)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,r){return P.current.useSyncExternalStore(e,t,r)},t.useTransition=function(){return P.current.useTransition()},t.version="18.3.1"},540:(e,t,r)=>{e.exports=r(287)},848:(e,t,r)=>{e.exports=r(20)}},t={};function r(e,t){return Array(t+1).join(e)}var n=["ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","BODY","CANVAS","CENTER","DD","DIR","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","FRAMESET","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","HTML","ISINDEX","LI","MAIN","MENU","NAV","NOFRAMES","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TBODY","TD","TFOOT","TH","THEAD","TR","UL"];function o(e){return u(e,n)}var i=["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"];function a(e){return u(e,i)}var s=["A","TABLE","THEAD","TBODY","TFOOT","TH","TD","IFRAME","SCRIPT","AUDIO","VIDEO"];function u(e,t){return t.indexOf(e.nodeName)>=0}function c(e,t){return e.getElementsByTagName&&t.some((function(t){return e.getElementsByTagName(t).length}))}var l={};function f(e){return e?e.replace(/(\n+\s*)+/g,"\n"):""}function d(e){for(var t in this.options=e,this._keep=[],this._remove=[],this.blankRule={replacement:e.blankReplacement},this.keepReplacement=e.keepReplacement,this.defaultRule={replacement:e.defaultReplacement},this.array=[],e.rules)this.array.push(e.rules[t])}function p(e,t,r){for(var n=0;n<e.length;n++){var o=e[n];if(m(o,t,r))return o}}function m(e,t,r){var n=e.filter;if("string"==typeof n){if(n===t.nodeName.toLowerCase())return!0}else if(Array.isArray(n)){if(n.indexOf(t.nodeName.toLowerCase())>-1)return!0}else{if("function"!=typeof n)throw new TypeError("`filter` needs to be a string, array, or function");if(n.call(e,t,r))return!0}}function h(e){var t=e.nextSibling||e.parentNode;return e.parentNode.removeChild(e),t}function g(e,t,r){return e&&e.parentNode===t||r(t)?t.nextSibling||t.parentNode:t.firstChild||t.nextSibling||t.parentNode}l.paragraph={filter:"p",replacement:function(e){return"\n\n"+e+"\n\n"}},l.lineBreak={filter:"br",replacement:function(e,t,r){return r.br+"\n"}},l.heading={filter:["h1","h2","h3","h4","h5","h6"],replacement:function(e,t,n){var o=Number(t.nodeName.charAt(1));return"setext"===n.headingStyle&&o<3?"\n\n"+e+"\n"+r(1===o?"=":"-",e.length)+"\n\n":"\n\n"+r("#",o)+" "+e+"\n\n"}},l.blockquote={filter:"blockquote",replacement:function(e){return"\n\n"+(e=(e=e.replace(/^\n+|\n+$/g,"")).replace(/^/gm,"> "))+"\n\n"}},l.list={filter:["ul","ol"],replacement:function(e,t){var r=t.parentNode;return"LI"===r.nodeName&&r.lastElementChild===t?"\n"+e:"\n\n"+e+"\n\n"}},l.listItem={filter:"li",replacement:function(e,t,r){e=e.replace(/^\n+/,"").replace(/\n+$/,"\n").replace(/\n/gm,"\n    ");var n=r.bulletListMarker+"   ",o=t.parentNode;if("OL"===o.nodeName){var i=o.getAttribute("start"),a=Array.prototype.indexOf.call(o.children,t);n=(i?Number(i)+a:a+1)+".  "}return n+e+(t.nextSibling&&!/\n$/.test(e)?"\n":"")}},l.indentedCodeBlock={filter:function(e,t){return"indented"===t.codeBlockStyle&&"PRE"===e.nodeName&&e.firstChild&&"CODE"===e.firstChild.nodeName},replacement:function(e,t,r){return"\n\n    "+t.firstChild.textContent.replace(/\n/g,"\n    ")+"\n\n"}},l.fencedCodeBlock={filter:function(e,t){return"fenced"===t.codeBlockStyle&&"PRE"===e.nodeName&&e.firstChild&&"CODE"===e.firstChild.nodeName},replacement:function(e,t,n){for(var o,i=((t.firstChild.getAttribute("class")||"").match(/language-(\S+)/)||[null,""])[1],a=t.firstChild.textContent,s=n.fence.charAt(0),u=3,c=new RegExp("^"+s+"{3,}","gm");o=c.exec(a);)o[0].length>=u&&(u=o[0].length+1);var l=r(s,u);return"\n\n"+l+i+"\n"+a.replace(/\n$/,"")+"\n"+l+"\n\n"}},l.horizontalRule={filter:"hr",replacement:function(e,t,r){return"\n\n"+r.hr+"\n\n"}},l.inlineLink={filter:function(e,t){return"inlined"===t.linkStyle&&"A"===e.nodeName&&e.getAttribute("href")},replacement:function(e,t){var r=t.getAttribute("href");r&&(r=r.replace(/([()])/g,"\\$1"));var n=f(t.getAttribute("title"));return n&&(n=' "'+n.replace(/"/g,'\\"')+'"'),"["+e+"]("+r+n+")"}},l.referenceLink={filter:function(e,t){return"referenced"===t.linkStyle&&"A"===e.nodeName&&e.getAttribute("href")},replacement:function(e,t,r){var n,o,i=t.getAttribute("href"),a=f(t.getAttribute("title"));switch(a&&(a=' "'+a+'"'),r.linkReferenceStyle){case"collapsed":n="["+e+"][]",o="["+e+"]: "+i+a;break;case"shortcut":n="["+e+"]",o="["+e+"]: "+i+a;break;default:var s=this.references.length+1;n="["+e+"]["+s+"]",o="["+s+"]: "+i+a}return this.references.push(o),n},references:[],append:function(e){var t="";return this.references.length&&(t="\n\n"+this.references.join("\n")+"\n\n",this.references=[]),t}},l.emphasis={filter:["em","i"],replacement:function(e,t,r){return e.trim()?r.emDelimiter+e+r.emDelimiter:""}},l.strong={filter:["strong","b"],replacement:function(e,t,r){return e.trim()?r.strongDelimiter+e+r.strongDelimiter:""}},l.code={filter:function(e){var t=e.previousSibling||e.nextSibling,r="PRE"===e.parentNode.nodeName&&!t;return"CODE"===e.nodeName&&!r},replacement:function(e){if(!e)return"";e=e.replace(/\r?\n|\r/g," ");for(var t=/^`|^ .*?[^ ].* $|`$/.test(e)?" ":"",r="`",n=e.match(/`+/gm)||[];-1!==n.indexOf(r);)r+="`";return r+t+e+t+r}},l.image={filter:"img",replacement:function(e,t){var r=f(t.getAttribute("alt")),n=t.getAttribute("src")||"",o=f(t.getAttribute("title"));return n?"!["+r+"]("+n+(o?' "'+o+'"':"")+")":""}},d.prototype={add:function(e,t){this.array.unshift(t)},keep:function(e){this._keep.unshift({filter:e,replacement:this.keepReplacement})},remove:function(e){this._remove.unshift({filter:e,replacement:function(){return""}})},forNode:function(e){return e.isBlank?this.blankRule:(t=p(this.array,e,this.options))||(t=p(this._keep,e,this.options))||(t=p(this._remove,e,this.options))?t:this.defaultRule;var t},forEach:function(e){for(var t=0;t<this.array.length;t++)e(this.array[t],t)}};var y,v,b="undefined"!=typeof window?window:{},E=function(){var e=b.DOMParser,t=!1;try{(new e).parseFromString("","text/html")&&(t=!0)}catch(e){}return t}()?b.DOMParser:(y=function(){},function(){var e=!1;try{document.implementation.createHTMLDocument("").open()}catch(t){b.ActiveXObject&&(e=!0)}return e}()?y.prototype.parseFromString=function(e){var t=new window.ActiveXObject("htmlfile");return t.designMode="on",t.open(),t.write(e),t.close(),t}:y.prototype.parseFromString=function(e){var t=document.implementation.createHTMLDocument("");return t.open(),t.write(e),t.close(),t},y);function S(e,t){var r;return function(e){var t=e.element,r=e.isBlock,n=e.isVoid,o=e.isPre||function(e){return"PRE"===e.nodeName};if(t.firstChild&&!o(t)){for(var i=null,a=!1,s=null,u=g(s,t,o);u!==t;){if(3===u.nodeType||4===u.nodeType){var c=u.data.replace(/[ \r\n\t]+/g," ");if(i&&!/ $/.test(i.data)||a||" "!==c[0]||(c=c.substr(1)),!c){u=h(u);continue}u.data=c,i=u}else{if(1!==u.nodeType){u=h(u);continue}r(u)||"BR"===u.nodeName?(i&&(i.data=i.data.replace(/ $/,"")),i=null,a=!1):n(u)||o(u)?(i=null,a=!0):i&&(a=!1)}var l=g(s,u,o);s=u,u=l}i&&(i.data=i.data.replace(/ $/,""),i.data||h(i))}}({element:r="string"==typeof e?(v=v||new E).parseFromString('<x-turndown id="turndown-root">'+e+"</x-turndown>","text/html").getElementById("turndown-root"):e.cloneNode(!0),isBlock:o,isVoid:a,isPre:t.preformattedCode?x:null}),r}function x(e){return"PRE"===e.nodeName||"CODE"===e.nodeName}function _(e,t){return e.isBlock=o(e),e.isCode="CODE"===e.nodeName||e.parentNode.isCode,e.isBlank=function(e){return!a(e)&&!function(e){return u(e,s)}(e)&&/^\s*$/i.test(e.textContent)&&!function(e){return c(e,i)}(e)&&!function(e){return c(e,s)}(e)}(e),e.flankingWhitespace=function(e,t){if(e.isBlock||t.preformattedCode&&e.isCode)return{leading:"",trailing:""};var r,n={leading:(r=e.textContent.match(/^(([ \t\r\n]*)(\s*))(?:(?=\S)[\s\S]*\S)?((\s*?)([ \t\r\n]*))$/))[1],leadingAscii:r[2],leadingNonAscii:r[3],trailing:r[4],trailingNonAscii:r[5],trailingAscii:r[6]};return n.leadingAscii&&C("left",e,t)&&(n.leading=n.leadingNonAscii),n.trailingAscii&&C("right",e,t)&&(n.trailing=n.trailingNonAscii),{leading:n.leading,trailing:n.trailing}}(e,t),e}function C(e,t,r){var n,i,a;return"left"===e?(n=t.previousSibling,i=/ $/):(n=t.nextSibling,i=/^ /),n&&(3===n.nodeType?a=i.test(n.nodeValue):r.preformattedCode&&"CODE"===n.nodeName?a=!1:1!==n.nodeType||o(n)||(a=i.test(n.textContent))),a}var w=Array.prototype.reduce,k=[[/\\/g,"\\\\"],[/\*/g,"\\*"],[/^-/g,"\\-"],[/^\+ /g,"\\+ "],[/^(=+)/g,"\\$1"],[/^(#{1,6}) /g,"\\$1 "],[/`/g,"\\`"],[/^~~~/g,"\\~~~"],[/\[/g,"\\["],[/\]/g,"\\]"],[/^>/g,"\\>"],[/_/g,"\\_"],[/^(\d+)\. /g,"$1\\. "]];function A(e){if(!(this instanceof A))return new A(e);var t={rules:l,headingStyle:"setext",hr:"* * *",bulletListMarker:"*",codeBlockStyle:"indented",fence:"```",emDelimiter:"_",strongDelimiter:"**",linkStyle:"inlined",linkReferenceStyle:"full",br:"  ",preformattedCode:!1,blankReplacement:function(e,t){return t.isBlock?"\n\n":""},keepReplacement:function(e,t){return t.isBlock?"\n\n"+t.outerHTML+"\n\n":t.outerHTML},defaultReplacement:function(e,t){return t.isBlock?"\n\n"+e+"\n\n":e}};this.options=function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])}return e}({},t,e),this.rules=new d(this.options)}function R(e){var t=this;return w.call(e.childNodes,(function(e,r){var n="";return 3===(r=new _(r,t.options)).nodeType?n=r.isCode?r.nodeValue:t.escape(r.nodeValue):1===r.nodeType&&(n=N.call(t,r)),O(e,n)}),"")}function T(e){var t=this;return this.rules.forEach((function(r){"function"==typeof r.append&&(e=O(e,r.append(t.options)))})),e.replace(/^[\t\r\n]+/,"").replace(/[\t\r\n\s]+$/,"")}function N(e){var t=this.rules.forNode(e),r=R.call(this,e),n=e.flankingWhitespace;return(n.leading||n.trailing)&&(r=r.trim()),n.leading+t.replacement(r,e,this.options)+n.trailing}function O(e,t){var r=function(e){for(var t=e.length;t>0&&"\n"===e[t-1];)t--;return e.substring(0,t)}(e),n=t.replace(/^\n*/,""),o=Math.max(e.length-r.length,t.length-n.length);return r+"\n\n".substring(0,o)+n}A.prototype={turndown:function(e){if(!function(e){return null!=e&&("string"==typeof e||e.nodeType&&(1===e.nodeType||9===e.nodeType||11===e.nodeType))}(e))throw new TypeError(e+" is not a string, or an element/document/fragment node.");if(""===e)return"";var t=R.call(this,new S(e,this.options));return T.call(this,t)},use:function(e){if(Array.isArray(e))for(var t=0;t<e.length;t++)this.use(e[t]);else{if("function"!=typeof e)throw new TypeError("plugin must be a Function or an Array of Functions");e(this)}return this},addRule:function(e,t){return this.rules.add(e,t),this},keep:function(e){return this.rules.keep(e),this},remove:function(e){return this.rules.remove(e),this},escape:function(e){return k.reduce((function(e,t){return e.replace(t[0],t[1])}),e)}};const P=A;var I=function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}(848);!function(e){const{addFilter:t}=e.hooks,{Button:r,TextareaControl:n,Spinner:o,Tooltip:i,IconButton:a}=e.components,{useState:s,useCallback:u,memo:c,useEffect:l}=e.element,{__}=e.i18n,f=e.apiFetch,{select:d,dispatch:p,useSelect:m}=e.data,{createHigherOrderComponent:h}=e.compose,{createNotice:g}=p("core/notices");let y=[];const v=c((({setPrompt:e,disabled:t})=>{const[r,n]=s(!1),o=u((async()=>{n(!0);const t=d("core/editor").getEditedPostAttribute("id"),r=d("core/editor").getEditedPostAttribute("title"),o=d("core/editor").getEditedPostAttribute("content"),i=d("core/editor").getEditedPostAttribute("type"),a=new P({headingStyle:"atx",codeBlockStyle:"fenced"}).turndown(o);try{const n=await f({path:"/superdraft/v1/image/generate-prompt",method:"POST",data:{postId:t,postTitle:r,postContent:a,postType:i,previousPrompts:y}});n.prompt&&(e(n.prompt),y.push(n.prompt))}catch(e){console.error("Error generating prompt:",e)}finally{n(!1)}}),[e]);return(0,I.jsx)(i,{text:__("Auto-generate prompt","superdraft"),children:(0,I.jsx)(a,{className:"superdraft-auto-generate-button",icon:(0,I.jsx)("svg",{fill:"currentColor",version:"1.1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32.318 32.318",children:(0,I.jsx)("g",{children:(0,I.jsx)("path",{d:"M30.537,7.366l-4.244-4.242c-0.586-0.586-1.534-0.586-2.12,0L1.781,25.514c-0.281,0.281-0.439,0.664-0.439,1.062 s0.158,0.777,0.439,1.062l4.242,4.24c0.293,0.293,0.678,0.439,1.062,0.439c0.384,0,0.768-0.146,1.061-0.439L30.539,9.488 c0.279-0.281,0.438-0.663,0.438-1.061S30.816,7.647,30.537,7.366z M22.052,13.729l-2.121-2.121l5.304-5.303l2.121,2.121 L22.052,13.729z M2.493,6c0-0.829,0.671-1.5,1.5-1.5h3v-3c0-0.829,0.671-1.5,1.5-1.5c0.828,0,1.5,0.671,1.5,1.5v3h3 c0.828,0,1.5,0.671,1.5,1.5c0,0.829-0.672,1.5-1.5,1.5h-3v3c0,0.829-0.672,1.5-1.5,1.5c-0.829,0-1.5-0.671-1.5-1.5v-3h-3 C3.165,7.5,2.493,6.829,2.493,6z"})})}),onClick:o,disabled:t||r})})})),b=c((({isProcessing:e,setIsProcessing:t})=>{const[o,i]=s(null),[a,c]=s(""),h=(window.superdraftSettings?.images?.image_model||"").includes("/"),{postId:y,featuredImageId:b}=m((e=>({postId:d("core/editor").getEditedPostAttribute("id"),featuredImageId:d("core/editor").getEditedPostAttribute("featured_media")})),[]);l((()=>{i(null),c("")}),[b]);const E=u((e=>{p("core/editor").editPost({featured_media:e})}),[]),S=u((e=>{let t=__("An unexpected error occurred.","superdraft");if(e.message)try{if("api_error"===e.code){const r=e.message.match(/\[message\] => (.+?)\n/);t=r?r[1]:e.message}else t=e.message}catch(r){t=e.message}g("error",t,{isDismissible:!0,type:"snackbar"})}),[]),x=u((async()=>{if(a){t(!0);try{const e=await f({path:"/superdraft/v1/image/generate",method:"POST",data:{postId:y,prompt:a}});e.attachment_id&&(E(e.attachment_id),g("success",__("Image generated successfully.","superdraft"),{type:"snackbar"}))}catch(e){S(e)}finally{t(!1)}}}),[a,y,E,t,S]),_=u((async()=>{if(a&&b){t(!0);try{const e=await f({path:"/superdraft/v1/image/edit",method:"POST",data:{postId:y,featuredImageId:b,prompt:a}});e.attachment_id&&(E(e.attachment_id),g("success",__("Image edited successfully.","superdraft"),{type:"snackbar"}))}catch(e){S(e)}finally{t(!1)}}}),[a,b,E,t,S]),C=u((e=>{i((t=>{const r=t===e?null:e;return t!==r&&c(""),r}))}),[]),w="generate"===o?x:_;return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)("div",{children:[(0,I.jsxs)(r,{isSecondary:"generate"!==o,isPrimary:"generate"===o,onClick:()=>C("generate"),style:{marginRight:"8px"},children:[__("Generate","superdraft"),(0,I.jsx)("svg",{viewBox:"0 0 24 24",width:"20",height:"20",style:{marginLeft:"4px",transform:"generate"===o?"rotate(180deg)":"none",transition:"transform 0.2s"},children:(0,I.jsx)("path",{fill:"currentColor",d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"})})]}),!h&&(0,I.jsxs)(r,{isSecondary:"edit"!==o,isPrimary:"edit"===o,onClick:()=>C("edit"),disabled:!b,children:[__("Edit","superdraft"),(0,I.jsx)("svg",{viewBox:"0 0 24 24",width:"20",height:"20",style:{marginLeft:"4px",transform:"edit"===o?"rotate(180deg)":"none",transition:"transform 0.2s"},children:(0,I.jsx)("path",{fill:"currentColor",d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"})})]})]}),o&&(0,I.jsxs)("div",{className:"superdraft-mode-controls",children:[(0,I.jsxs)("div",{className:"superdraft-prompt-wrapper",style:{position:"relative"},children:[(0,I.jsx)(n,{label:__("Prompt","superdraft"),value:a,onChange:c,help:__("generate"===o?"Enter a description for the new featured image":"Describe the changes for your current image","superdraft")}),"generate"===o&&(0,I.jsx)(v,{setPrompt:c,disabled:e})]}),(0,I.jsx)(r,{isPrimary:!0,onClick:w,disabled:e,children:__(e?"Processing...":"generate"===o?"Generate":"Edit","superdraft")})]})]})}));t("editor.PostFeaturedImage","superdraft/with-image-generation",h((e=>c((t=>{const[r,n]=s(!1),i=()=>r?(0,I.jsxs)("div",{className:"superdraft-image-processing-overlay",style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.7)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:100},children:[(0,I.jsx)(o,{}),(0,I.jsx)("p",{style:{marginTop:"10px"},children:__("Processing image...","superdraft")})]}):null;return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)("div",{className:"superdraft-featured-image-wrapper",style:{position:"relative"},children:[(0,I.jsx)(e,{...t}),(0,I.jsx)(i,{})]}),(0,I.jsx)(b,{isProcessing:r,setIsProcessing:n})]})}))),"withImageGeneration"))}(window.wp)})();